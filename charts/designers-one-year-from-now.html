<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Designers One Year From Now — North Star Vision</title>

    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/dagre@0.8.5/dist/dagre.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dagre-d3@0.6.4/dist/dagre-d3.min.js"></script>

    <style>
      :root {
        --bg: #0b0d12;
        --panel: #0f1420;
        --muted: #9aa4b2;
        --text: #e5e7eb;
        --stroke: #2b3445;
        --accent: #60a5fa;
        --good: #34d399;
        --warn: #fbbf24;
      }
      html,
      body {
        height: 100vh;
        width: 100vw;
        margin: 0;
        padding: 0;
        overflow: hidden;
        max-width: none;
        box-sizing: border-box;
        background: var(--bg);
        color: var(--text);
        font-family:
          ui-sans-serif,
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Helvetica,
          Arial;
      }
      * {
        box-sizing: border-box;
      }

      .wrap {
        width: 100vw;
        height: 100vh;
        max-width: none;
        display: grid;
        grid-template-columns: 1.35fr 0.65fr;
        gap: 16px;
        padding: 16px;
        box-sizing: border-box;
        margin: 0;
      }
      .wrap.right-collapsed {
        grid-template-columns: 1fr;
        padding: 0;
        gap: 0;
        width: 100vw;
        max-width: none;
      }
      .left {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.04),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid var(--stroke);
        border-radius: 14px;
        overflow: hidden;
        position: relative;
        width: 100%;
        height: 100%;
        max-width: none;
        min-width: 0;
      }
      .wrap.right-collapsed .left {
        border-radius: 0;
        border-left: none;
        border-right: none;
        border-top: none;
        width: 100vw;
      }
      .toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 14px;
        border-bottom: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.02);
        gap: 12px;
        flex-wrap: wrap;
        position: relative;
        z-index: 10;
      }
      .title {
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-width: 0;
        flex: 1;
      }
      .title h1 {
        font-size: 14px;
        margin: 0;
        letter-spacing: 0.2px;
      }
      .title p {
        font-size: 12px;
        margin: 0;
        color: var(--muted);
      }
      .btns {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-left: auto;
        position: relative;
        z-index: 11;
      }
      button {
        appearance: none;
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.02);
        color: var(--text);
        padding: 8px 10px;
        border-radius: 10px;
        font-size: 12px;
        cursor: pointer;
        position: relative;
        z-index: 12;
        pointer-events: auto;
        touch-action: manipulation;
        min-height: 36px;
        min-width: 44px;
      }
      button:hover {
        border-color: rgba(96, 165, 250, 0.8);
      }
      button:active {
        transform: scale(0.98);
      }
      .svgWrap {
        position: absolute;
        inset: 58px 0 0 0;
        overflow: auto;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      .right {
        background: var(--panel);
        border: 1px solid var(--stroke);
        border-radius: 14px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }
      .rightHeader {
        padding: 12px 14px;
        border-bottom: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.02);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      .rightHeaderContent {
        flex: 1;
      }
      .toggleBtn {
        appearance: none;
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.02);
        color: var(--text);
        padding: 6px 10px;
        border-radius: 8px;
        font-size: 12px;
        cursor: pointer;
        flex-shrink: 0;
      }
      .toggleBtn:hover {
        border-color: rgba(96, 165, 250, 0.8);
      }
      .right.collapsed {
        display: none;
      }
      .card {
        padding: 14px;
        overflow: auto;
      }
      .card h3 {
        margin: 0 0 6px;
        font-size: 16px;
      }
      .pillRow {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin: 8px 0 12px;
      }
      .pill {
        font-size: 11px;
        padding: 4px 8px;
        border-radius: 999px;
        border: 1px solid var(--stroke);
        color: var(--muted);
        background: rgba(255, 255, 255, 0.02);
      }
      .pill.accent {
        border-color: rgba(96, 165, 250, 0.6);
        color: rgba(96, 165, 250, 0.95);
      }
      .pill.good {
        border-color: rgba(52, 211, 153, 0.6);
        color: rgba(52, 211, 153, 0.95);
      }
      .pill.warn {
        border-color: rgba(251, 191, 36, 0.6);
        color: rgba(251, 191, 36, 0.95);
      }

      .section {
        margin-top: 14px;
        padding-top: 12px;
        border-top: 1px dashed rgba(255, 255, 255, 0.12);
      }
      .section h4 {
        margin: 0 0 8px;
        font-size: 12px;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      ul {
        margin: 0 0 0 18px;
        padding: 0;
        line-height: 1.5;
        font-size: 13px;
        color: var(--text);
      }
      li {
        margin: 6px 0;
      }

      /* Graph styling */
      svg {
        width: 100%;
        height: 100%;
        pointer-events: auto;
      }

      .node {
        cursor: pointer;
        pointer-events: auto;
      }
      .node rect {
        rx: 12px;
        ry: 12px;
        fill: rgba(255, 255, 255, 0.03);
        stroke: rgba(255, 255, 255, 0.16);
        stroke-width: 1.3px;
        pointer-events: auto;
      }
      .node.selected rect {
        stroke: rgba(96, 165, 250, 0.95);
        stroke-width: 2.4px;
      }
      .node text {
        fill: var(--text);
        font-weight: 650;
        font-size: 12px;
        pointer-events: none;
        user-select: none;
      }
      .node:hover rect {
        stroke: rgba(96, 165, 250, 0.6);
        stroke-width: 2px;
      }

      .cluster rect {
        fill: rgba(255, 255, 255, 0.02);
        stroke: rgba(255, 255, 255, 0.12);
        stroke-width: 1.2px;
        rx: 14px;
        ry: 14px;
      }
      .cluster text {
        fill: rgba(229, 231, 235, 0.85);
        font-weight: 700;
        font-size: 12px;
        letter-spacing: 0.02em;
      }

      .edgePath path {
        stroke: rgba(255, 255, 255, 0.22);
        stroke-width: 1.4px;
        fill: none;
      }
      .edgeLabel text {
        fill: rgba(255, 255, 255, 0.6);
        font-size: 10px;
      }

      .edgePath.strong path {
        stroke: rgba(96, 165, 250, 0.55);
        stroke-width: 2.1px;
      }
      .edgePath.dashed path {
        stroke-dasharray: 6 5;
        opacity: 0.95;
      }
      .edgePath.success path {
        stroke: rgba(52, 211, 153, 0.55);
        stroke-width: 2px;
      }

      @media (max-width: 768px) {
        .toolbar {
          padding: 10px 12px;
          gap: 10px;
        }
        .title {
          min-width: 0;
          width: 100%;
        }
        .title p {
          font-size: 11px;
        }
        .btns {
          width: 100%;
          margin-left: 0;
          margin-top: 8px;
          justify-content: flex-start;
        }
        button {
          flex: 1;
          min-width: 0;
          font-size: 11px;
          padding: 10px 8px;
        }
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="left">
        <div class="toolbar">
          <div class="title">
            <h1>Designers One Year From Now — North Star Vision</h1>
            <p>
              Future state: Token-native design, AI-assisted workflows with
              guardrails, Design Sandbox for prototyping, and governance-driven
              contribution. Click nodes to explore capabilities.
            </p>
          </div>
          <div class="btns">
            <button id="btnCenter">Center view</button>
            <button id="btnReset">Reset selection</button>
            <button id="togglePanel" class="toggleBtn" title="Toggle panel">
              Panel
            </button>
          </div>
        </div>

        <div class="svgWrap">
          <svg id="svg"><g id="g"></g></svg>
        </div>
      </div>

      <div class="right" id="rightPanel">
        <div class="rightHeader">
          <div class="rightHeaderContent">
            <h2 id="panelTitle">Capability details</h2>
            <p id="panelSubtitle">
              Click any node to see what designers can do, what tools they use,
              and how they contribute.
            </p>
          </div>
        </div>
        <div class="card" id="panel"></div>
      </div>
    </div>

    <script>
      // -----------------------------
      // Nodes: Designer Future State
      // -----------------------------
      const nodes = {
        // Foundation: Token & Spec Repos
        tokenRepo: {
          title: "Token Repository\n(Versioned & Consumed)",
          pills: ["Foundation", "Versioned", "System of Record"],
          owns: [
            "Token repository exists and is versioned",
            "Consumed by platforms via CDN/NPM/Maven",
            "Primitives → Semantics → Component token hierarchy",
            "Theme/brand swapping via modes",
            "Migration notes and changelog maintained",
          ],
          tools: [
            "GitHub repository",
            "Versioned token packages",
            "CDN/NPM/Maven distribution",
            "Changelog generator",
          ],
          outputs: [
            "Versioned token packages",
            "Token consumption endpoints",
            "Migration guides",
            "Changelog",
          ],
        },

        specsRepo: {
          title: "Specs Repository\n(YAML/JSON Contracts)",
          pills: ["Foundation", "Contracts", "Versioned"],
          owns: [
            "Component/block specs in YAML/JSON format",
            "Defines contracts: anatomy, variants, states, constraints",
            "Token bindings (canonical keys, no raw values)",
            "A11y acceptance criteria",
            "Versioned and validated",
          ],
          tools: [
            "GitHub repository",
            "YAML/JSON schema validation",
            "Spec generators",
            "Version control",
          ],
          outputs: [
            "Versioned component specs",
            "Validated contracts",
            "Spec documentation",
          ],
        },

        // Designer Workflows
        tokenNativeDesign: {
          title: "Token-Native Design\n(No Ad Hoc Values)",
          pills: ["Designer", "Token-First", "System"],
          owns: [
            "Design using primitives → semantics → component tokens only",
            "No ad hoc color/spacing/typography values",
            "Bind Figma components to Variables (token references)",
            "Use semantic tokens for all design decisions",
            "Understand token hierarchy and when to use each tier",
          ],
          tools: [
            "Figma Variables (token collections)",
            "Figma component properties",
            "Token documentation",
            "Design system guidelines",
          ],
          outputs: [
            "Token-bound Figma designs",
            "Designs that align with system",
            "Designs ready for spec validation",
          ],
        },

        themeBrandSwap: {
          title: "Theme/Brand Swapping\n(Confident & Reliable)",
          pills: ["Designer", "Theming", "Multi-brand"],
          owns: [
            "Swap themes/brands confidently in Figma via Variables/modes",
            "Preview designs in browser via config using versioned token package",
            "Verify designs work across all supported themes",
            "Understand mode structure and token relationships",
          ],
          tools: [
            "Figma Variables modes",
            "Design Sandbox (Storybook/Next)",
            "Token package configuration",
            "Theme preview tools",
          ],
          outputs: [
            "Multi-theme designs",
            "Theme-verified prototypes",
            "Brand-agnostic design patterns",
          ],
        },

        aiAssistedWorkflow: {
          title: "AI-Assisted Design\n(MCP + Cursor + Claude)",
          pills: ["Designer", "AI Tools", "Guardrailed"],
          owns: [
            "Use MCP + Cursor + Claude/Codex with guardrails",
            "Scaffold/validate UI that is spec- and token-compliant",
            "Not 'vibe-based' iteration—deterministic, validated outputs",
            "AI drafts; validation gates enforce compliance",
            "Leverage AI for boilerplate, not creative decisions",
          ],
          tools: [
            "MCP (Model Context Protocol)",
            "Cursor IDE",
            "Claude/Codex AI",
            "Spec validation gates",
            "Token validation",
          ],
          outputs: [
            "Spec-compliant UI scaffolds",
            "Token-bound code",
            "Validated design implementations",
          ],
        },

        designSandbox: {
          title: "Design Sandbox\n(Storybook/Next + Tokens)",
          pills: ["Designer", "Prototyping", "Validation"],
          owns: [
            "Prototype in-browser using Design Sandbox",
            "Wired to versioned tokens for real-time updates",
            "Verify states and a11y quickly",
            "Test interactions and responsive behavior",
            "Share prototypes with stakeholders",
          ],
          tools: [
            "Storybook or Next.js sandbox",
            "Versioned token package",
            "A11y testing tools",
            "State management",
          ],
          outputs: [
            "Interactive prototypes",
            "A11y-verified designs",
            "State matrices",
            "Responsive test cases",
          ],
        },

        specContribution: {
          title: "Spec-Driven Contribution\n(Not Just Figma Files)",
          pills: ["Designer", "Governance", "Contribution"],
          owns: [
            "Contribute to system through specs + governance",
            "Participate in reviews and checklists",
            "Attend office hours for guidance",
            "Not just editing Figma files—system-level thinking",
            "Understand contracts and constraints",
          ],
          tools: [
            "Spec authoring tools",
            "Review processes",
            "Governance checklists",
            "Office hours",
            "Decision logs",
          ],
          outputs: [
            "Spec contributions",
            "Governance participation",
            "System improvements",
            "Documented decisions",
          ],
        },

        // System Capabilities
        figmaSpecSync: {
          title: "Figma ↔ Specs Sync\n(Generate or Validate)",
          pills: ["System", "Automation", "Validation"],
          owns: [
            "Figma artifacts can be generated from specs",
            "Figma components can be validated against specs",
            "Bidirectional sync between Figma and spec repo",
            "Automated consistency checks",
          ],
          tools: [
            "Figma Plugin API",
            "Spec generators",
            "Validation tools",
            "Sync automation",
          ],
          outputs: [
            "Spec-synchronized Figma components",
            "Validation reports",
            "Consistency guarantees",
          ],
        },

        codeGeneration: {
          title: "Code Generation\n(Consistent APIs)",
          pills: ["System", "Automation", "Multi-framework"],
          owns: [
            "Generate code with consistent APIs across frameworks",
            "Spec-driven code generation",
            "Token-bound implementations",
            "Framework-agnostic patterns",
          ],
          tools: [
            "Code generators",
            "Spec parsers",
            "Framework templates",
            "MCP context",
          ],
          outputs: [
            "Framework-specific implementations",
            "Consistent APIs",
            "Token-bound code",
          ],
        },

        generatedDocs: {
          title: "Generated Documentation\n(Not Manually Maintained)",
          pills: ["System", "Automation", "Docs"],
          owns: [
            "Documentation generated from specs and tokens",
            "Not manually maintained—always in sync",
            "Component API docs, usage examples, patterns",
            "Auto-updated when specs/tokens change",
          ],
          tools: [
            "Doc generators",
            "Spec parsers",
            "Template engines",
            "CI/CD integration",
          ],
          outputs: [
            "Component documentation",
            "Usage examples",
            "Pattern libraries",
            "API references",
          ],
        },

        realGovernance: {
          title: "Real Governance\n(Linting, CI, Release)",
          pills: ["System", "Governance", "Enforcement"],
          owns: [
            "Governance is real: linting, CI, release cadence",
            "Migration notes required for breaking changes",
            "Automated quality gates",
            "Enforced release discipline",
            "Quantitative decision-making",
          ],
          tools: [
            "Linting tools",
            "CI/CD pipelines",
            "Release automation",
            "Migration tools",
            "Telemetry",
          ],
          outputs: [
            "Enforced standards",
            "Safe releases",
            "Migration guides",
            "Governance reports",
          ],
        },

        dsAsProduct: {
          title: "DS as Product\n(Roadmap, Separate from FRE)",
          pills: ["System", "Product", "Roadmap"],
          owns: [
            "Design System operates as a product with a roadmap",
            "Separate from Frontend Engineering (FRE)",
            "Product thinking: user needs, adoption, ROI",
            "Strategic planning and prioritization",
          ],
          tools: [
            "Product roadmap",
            "Adoption metrics",
            "ROI tracking",
            "User research",
          ],
          outputs: [
            "Product roadmap",
            "Strategic priorities",
            "Adoption reports",
            "ROI analysis",
          ],
        },
      };

      // -----------------------------
      // Edges: Designer workflows
      // -----------------------------
      const edges = [
        // Foundation to Designer Workflows
        {
          from: "tokenRepo",
          to: "tokenNativeDesign",
          label: "design with tokens",
          cls: "strong",
        },
        {
          from: "tokenRepo",
          to: "themeBrandSwap",
          label: "swap themes/brands",
          cls: "strong",
        },
        {
          from: "specsRepo",
          to: "tokenNativeDesign",
          label: "validate against specs",
          cls: "strong",
        },
        {
          from: "specsRepo",
          to: "aiAssistedWorkflow",
          label: "spec context",
          cls: "strong",
        },
        {
          from: "tokenRepo",
          to: "designSandbox",
          label: "wire to tokens",
          cls: "strong",
        },
        {
          from: "specsRepo",
          to: "designSandbox",
          label: "component contracts",
          cls: "strong",
        },

        // Designer Workflows
        {
          from: "tokenNativeDesign",
          to: "themeBrandSwap",
          label: "token-based theming",
          cls: "dashed",
        },
        {
          from: "tokenNativeDesign",
          to: "aiAssistedWorkflow",
          label: "token context",
          cls: "dashed",
        },
        {
          from: "aiAssistedWorkflow",
          to: "designSandbox",
          label: "validate in sandbox",
          cls: "success",
        },
        {
          from: "designSandbox",
          to: "specContribution",
          label: "feedback to specs",
          cls: "dashed",
        },

        // System Capabilities
        {
          from: "specsRepo",
          to: "figmaSpecSync",
          label: "sync with Figma",
          cls: "strong",
        },
        {
          from: "specsRepo",
          to: "codeGeneration",
          label: "generate code",
          cls: "strong",
        },
        {
          from: "specsRepo",
          to: "generatedDocs",
          label: "generate docs",
          cls: "strong",
        },
        {
          from: "tokenRepo",
          to: "generatedDocs",
          label: "token docs",
          cls: "dashed",
        },
        {
          from: "specsRepo",
          to: "realGovernance",
          label: "governance rules",
          cls: "strong",
        },
        {
          from: "tokenRepo",
          to: "realGovernance",
          label: "token governance",
          cls: "strong",
        },
        {
          from: "realGovernance",
          to: "dsAsProduct",
          label: "product metrics",
          cls: "dashed",
        },

        // Designer Contribution
        {
          from: "specContribution",
          to: "specsRepo",
          label: "contribute specs",
          cls: "success",
        },
        {
          from: "specContribution",
          to: "realGovernance",
          label: "participate in governance",
          cls: "dashed",
        },
      ];

      // -----------------------------
      // Graph setup
      // -----------------------------
      const g = new dagreD3.graphlib.Graph({ multigraph: true, compound: true })
        .setGraph({
          rankdir: "LR",
          nodesep: 50,
          ranksep: 80,
          marginx: 24,
          marginy: 22,
        })
        .setDefaultEdgeLabel(() => ({}));

      // Clusters
      g.setNode("clusterFoundation", {
        label: "1) Foundation (System)",
        clusterLabelPos: "top",
        padding: 12,
      });
      g.setNode("clusterDesigner", {
        label: "2) Designer Workflows",
        clusterLabelPos: "top",
        padding: 12,
      });
      g.setNode("clusterSystem", {
        label: "3) System Capabilities",
        clusterLabelPos: "top",
        padding: 12,
      });

      // Add nodes
      Object.entries(nodes).forEach(([id, n]) => {
        const base =
          "fill: rgba(255,255,255,0.03); stroke: rgba(255,255,255,0.16); stroke-width: 1.3px;";
        const primary = [
          "tokenRepo",
          "specsRepo",
          "tokenNativeDesign",
          "aiAssistedWorkflow",
          "designSandbox",
          "figmaSpecSync",
          "codeGeneration",
          "realGovernance",
        ].includes(id);
        const style = primary
          ? base + " stroke: rgba(96,165,250,0.55);"
          : base;
        g.setNode(id, {
          label: n.title,
          rx: 12,
          ry: 12,
          padding: 14,
          style,
        });
      });

      // Assign parents (clusters)
      g.setParent("tokenRepo", "clusterFoundation");
      g.setParent("specsRepo", "clusterFoundation");
      g.setParent("tokenNativeDesign", "clusterDesigner");
      g.setParent("themeBrandSwap", "clusterDesigner");
      g.setParent("aiAssistedWorkflow", "clusterDesigner");
      g.setParent("designSandbox", "clusterDesigner");
      g.setParent("specContribution", "clusterDesigner");
      g.setParent("figmaSpecSync", "clusterSystem");
      g.setParent("codeGeneration", "clusterSystem");
      g.setParent("generatedDocs", "clusterSystem");
      g.setParent("realGovernance", "clusterSystem");
      g.setParent("dsAsProduct", "clusterSystem");

      // Add edges
      edges.forEach((e, i) => {
        try {
          g.setEdge(
            e.from,
            e.to,
            {
              label: e.label,
              class: e.cls || "",
              arrowhead: "vee",
              lineInterpolate: "basis",
            },
            `e${i}`,
          );
        } catch (error) {
          console.error(`Error adding edge from ${e.from} to ${e.to}:`, error);
        }
      });

      // -----------------------------
      // Render + interactivity
      // -----------------------------
      const svg = d3.select("#svg");
      const inner = d3.select("#g");
      const render = new dagreD3.render();

      const zoom = d3
        .zoom()
        .scaleExtent([0.5, 1.35])
        .on("zoom", (event) => inner.attr("transform", event.transform));

      svg.call(zoom);

      try {
        render(inner, g);
      } catch (error) {
        console.error("Error rendering graph:", error);
      }

      function centerView() {
        try {
          const graphWidth = g.graph().width;
          const svgWidth = svg.node().clientWidth;
          if (graphWidth && svgWidth) {
            const scale = 0.85;
            const tx = Math.max(16, (svgWidth - graphWidth * scale) / 2);
            const ty = 28;

            svg
              .transition()
              .duration(350)
              .call(zoom.transform, d3.zoomIdentity.translate(tx, ty).scale(scale));
          }
        } catch (error) {
          console.error("Error centering view:", error);
        }
      }

      // Center view after render
      requestAnimationFrame(() => {
        centerView();
      });

      // Right panel
      const panel = d3.select("#panel");
      const panelTitle = d3.select("#panelTitle");
      const panelSubtitle = d3.select("#panelSubtitle");

      function setPanel(id) {
        const n = nodes[id];
        if (!n) return;

        panelTitle.text(n.title.split("\n")[0]);
        panelSubtitle.text(
          "What designers can do, what tools they use, and how they contribute.",
        );

        panel.html("");
        panel.append("h3").text(n.title.split("\n")[0]);

        const pills = panel.append("div").attr("class", "pillRow");
        (n.pills || []).forEach((p, idx) => {
          const cls =
            idx === 0 ? "pill accent" : idx === 1 ? "pill good" : "pill warn";
          pills.append("span").attr("class", cls).text(p);
        });

        const s1 = panel.append("div").attr("class", "section");
        s1.append("h4").text("What designers can do");
        const ul1 = s1.append("ul");
        (n.owns || []).forEach((x) => ul1.append("li").text(x));

        const s2 = panel.append("div").attr("class", "section");
        s2.append("h4").text("Tools / Systems");
        const ul2 = s2.append("ul");
        (n.tools || []).forEach((x) => ul2.append("li").text(x));

        const s3 = panel.append("div").attr("class", "section");
        s3.append("h4").text("Outputs / Artifacts");
        const ul3 = s3.append("ul");
        (n.outputs || []).forEach((x) => ul3.append("li").text(x));
      }

      function clearSelection() {
        inner.selectAll("g.node").classed("selected", false);
      }

      inner
        .selectAll("g.node")
        .style("cursor", "pointer")
        .on("click", function (event, id) {
          clearSelection();
          d3.select(this).classed("selected", true);
          setPanel(id);
        });

      // Default selection
      inner
        .selectAll("g.node")
        .filter((d) => d === "tokenNativeDesign")
        .classed("selected", true);
      setPanel("tokenNativeDesign");

      // Buttons
      d3.select("#btnCenter").on("click", centerView);
      d3.select("#btnReset").on("click", () => {
        clearSelection();
        inner
          .selectAll("g.node")
          .filter((d) => d === "tokenNativeDesign")
          .classed("selected", true);
        setPanel("tokenNativeDesign");
        centerView();
      });

      // Panel toggle
      const rightPanel = d3.select("#rightPanel");
      const wrap = d3.select(".wrap");
      const toggleBtn = d3.select("#togglePanel");

      function updateToggleButton() {
        const isCollapsed = rightPanel.classed("collapsed");
        toggleBtn.text(isCollapsed ? "Show Panel" : "Hide Panel");
        toggleBtn.attr("title", isCollapsed ? "Show panel" : "Hide panel");
      }

      toggleBtn.on("click", () => {
        const isCollapsed = rightPanel.classed("collapsed");
        rightPanel.classed("collapsed", !isCollapsed);
        wrap.classed("right-collapsed", !isCollapsed);
        updateToggleButton();
      });

      // Initialize button text
      updateToggleButton();
    </script>
  </body>
</html>
