<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cursor Visual Browser — Component Creation Workflow</title>

    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/dagre@0.8.5/dist/dagre.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dagre-d3@0.6.4/dist/dagre-d3.min.js"></script>

    <style>
      :root {
        --bg: #0b0d12;
        --panel: #0f1420;
        --muted: #9aa4b2;
        --text: #e5e7eb;
        --stroke: #2b3445;
        --accent: #60a5fa;
        --good: #34d399;
        --warn: #fbbf24;
        --purple: #a78bfa;
        --blue: #3b82f6;
        --orange: #fb923c;
      }
      html,
      body {
        height: 100vh;
        width: 100vw;
        margin: 0;
        padding: 0;
        overflow: hidden;
        max-width: none;
        box-sizing: border-box;
        background: var(--bg);
        color: var(--text);
        font-family:
          ui-sans-serif,
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Helvetica,
          Arial;
      }
      * {
        box-sizing: border-box;
      }

      .wrap {
        width: 100vw;
        height: 100vh;
        max-width: none;
        display: grid;
        grid-template-columns: 1.35fr 0.65fr;
        gap: 16px;
        padding: 16px;
        box-sizing: border-box;
        margin: 0;
      }
      .wrap.right-collapsed {
        grid-template-columns: 1fr;
        padding: 0;
        gap: 0;
        width: 100vw;
        max-width: none;
      }
      .left {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.04),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid var(--stroke);
        border-radius: 14px;
        overflow: hidden;
        position: relative;
        width: 100%;
        height: 100%;
        max-width: none;
        min-width: 0;
      }
      .wrap.right-collapsed .left {
        border-radius: 0;
        border-left: none;
        border-right: none;
        border-top: none;
        width: 100vw;
      }
      .toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 14px;
        border-bottom: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.02);
        gap: 12px;
        flex-wrap: wrap;
      }
      .title {
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-width: 320px;
      }
      .title h1 {
        font-size: 14px;
        margin: 0;
        letter-spacing: 0.2px;
      }
      .title p {
        font-size: 12px;
        margin: 0;
        color: var(--muted);
      }
      .btns {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-left: auto;
      }
      button {
        appearance: none;
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.02);
        color: var(--text);
        padding: 8px 10px;
        border-radius: 10px;
        font-size: 12px;
        cursor: pointer;
      }
      button:hover {
        border-color: rgba(96, 165, 250, 0.8);
      }
      .svgWrap {
        position: absolute;
        inset: 58px 0 0 0;
        overflow: auto;
        width: 100%;
        height: 100%;
      }

      .right {
        background: var(--panel);
        border: 1px solid var(--stroke);
        border-radius: 14px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }
      .rightHeader {
        padding: 12px 14px;
        border-bottom: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.02);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      .rightHeaderContent {
        flex: 1;
      }
      .toggleBtn {
        appearance: none;
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.02);
        color: var(--text);
        padding: 6px 10px;
        border-radius: 8px;
        font-size: 12px;
        cursor: pointer;
        flex-shrink: 0;
      }
      .toggleBtn:hover {
        border-color: rgba(96, 165, 250, 0.8);
      }
      .right.collapsed {
        display: none;
      }
      .rightHeader h2 {
        margin: 0;
        font-size: 14px;
      }
      .rightHeader p {
        margin: 6px 0 0;
        font-size: 12px;
        color: var(--muted);
      }
      .card {
        padding: 14px;
        overflow: auto;
      }
      .card h3 {
        margin: 0 0 6px;
        font-size: 16px;
      }

      .pillRow {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin: 8px 0 12px;
      }
      .pill {
        font-size: 11px;
        padding: 4px 8px;
        border-radius: 999px;
        border: 1px solid var(--stroke);
        color: var(--muted);
        background: rgba(255, 255, 255, 0.02);
      }
      .pill.accent {
        border-color: rgba(96, 165, 250, 0.6);
        color: rgba(96, 165, 250, 0.95);
      }
      .pill.good {
        border-color: rgba(52, 211, 153, 0.6);
        color: rgba(52, 211, 153, 0.95);
      }
      .pill.warn {
        border-color: rgba(251, 191, 36, 0.6);
        color: rgba(251, 191, 36, 0.95);
      }

      .section {
        margin-top: 14px;
        padding-top: 12px;
        border-top: 1px dashed rgba(255, 255, 255, 0.12);
      }
      .section h4 {
        margin: 0 0 8px;
        font-size: 12px;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      ul {
        margin: 0 0 0 18px;
        padding: 0;
        line-height: 1.5;
        font-size: 13px;
        color: var(--text);
      }
      li {
        margin: 6px 0;
      }

      svg {
        width: 100%;
        height: 100%;
      }
      .node rect {
        rx: 12px;
        ry: 12px;
        fill: rgba(255, 255, 255, 0.03);
        stroke: rgba(255, 255, 255, 0.16);
        stroke-width: 1.3px;
      }
      .node.selected rect {
        stroke: rgba(96, 165, 250, 0.95);
        stroke-width: 2.4px;
      }
      .node text {
        fill: var(--text);
        font-weight: 650;
        font-size: 12px;
      }

      .edgePath path {
        stroke: rgba(255, 255, 255, 0.22);
        stroke-width: 1.4px;
        fill: none;
      }
      .edgeLabel text {
        fill: rgba(255, 255, 255, 0.6);
        font-size: 10px;
      }

      .dashed path {
        stroke-dasharray: 6 5;
        opacity: 0.95;
      }
      .strong path {
        stroke: rgba(96, 165, 250, 0.55);
        stroke-width: 2px;
      }
      .success path {
        stroke: rgba(52, 211, 153, 0.55);
        stroke-width: 2px;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="left">
        <div class="toolbar">
          <div class="title">
            <h1>Cursor Visual Browser — Component Creation Workflow</h1>
            <p>
              Using Cursor AI Visual Browser to create, version, package, and
              distribute design system components based on Elliot's designs.
            </p>
          </div>
          <div class="btns">
            <button id="btnCenter">Center view</button>
            <button id="btnReset">Reset selection</button>
            <button id="togglePanel" class="toggleBtn" title="Toggle panel">Panel</button>
          </div>
        </div>
        <div class="svgWrap">
          <svg id="svg"><g id="g"></g></svg>
        </div>
      </div>

      <div class="right" id="rightPanel">
        <div class="rightHeader">
          <div class="rightHeaderContent">
            <h2 id="panelTitle">Details</h2>
            <p id="panelSubtitle">Select a node in the diagram.</p>
          </div>
        </div>
        <div class="card" id="panel"></div>
      </div>
    </div>

    <script>
      const nodes = {
        elliotDesigns: {
          title: "Elliot's Designs",
          pills: ["Source", "Design intent", "Redesign"],
          owns: [
            "Original design comps and mockups from Elliot",
            "Design intent and visual specifications",
            "Redesign requirements and goals",
            "Visual design patterns and aesthetics",
          ],
          leverages: [
            "Design tools (Figma, Sketch, etc.)",
            "Design system principles",
            "User experience requirements",
          ],
          outputs: [
            "Design comps and specifications",
            "Visual design patterns",
            "Design intent documentation",
          ],
        },

        cursorVisualBrowser: {
          title: "Cursor AI Visual Browser",
          pills: ["Visual creation", "AI-assisted", "Iterative"],
          owns: [
            "Create components using visual browser interface",
            "Build atomic design hierarchy: atoms → molecules → organisms → pages → templates",
            "Iterate on components with visual feedback",
            "Generate component code with AI assistance",
            "Test components visually in browser context",
          ],
          leverages: [
            "Cursor AI Visual Browser extension",
            "AI code generation capabilities",
            "Visual component preview and testing",
            "Real-time browser rendering",
          ],
          outputs: [
            "Component code (HTML/CSS/JS)",
            "Visual component library",
            "Component hierarchy (atoms → templates)",
          ],
        },

        componentSpecs: {
          title: "Component Specs (YAML)",
          pills: ["Contract", "API definition", "Documentation"],
          owns: [
            "Generate component specs alongside component creation",
            "Define component API: props, variants, states, constraints",
            "Document token bindings and design system integration",
            "Include a11y requirements and acceptance criteria",
            "Version component specifications",
          ],
          leverages: [
            "Spec generation from component code",
            "YAML/JSON format for structured definitions",
            "Schema validation for consistency",
            "Automated spec generation tools",
          ],
          outputs: [
            "Component spec files (YAML/JSON)",
            "Component API documentation",
            "Versioned component contracts",
          ],
        },

        tokens: {
          title: "Design Tokens",
          pills: ["Styling", "Theming", "Versioned"],
          owns: [
            "Provide design tokens for component styling",
            "Support theming (light/dark modes)",
            "Version token releases",
            "Ensure token consistency across components",
          ],
          leverages: [
            "Token pipeline (Figma → CSS → npm)",
            "Token versioning and distribution",
            "Design system token library",
          ],
          outputs: [
            "Token packages (npm)",
            "CSS custom properties",
            "Token documentation",
          ],
        },

        versioning: {
          title: "Versioning & Packaging",
          pills: ["Semantic versioning", "NPM packages", "Distribution"],
          owns: [
            "Version components and specs using semantic versioning",
            "Package components into npm packages",
            "Create distributable component libraries",
            "Manage component dependencies and releases",
            "Generate changelogs and release notes",
          ],
          leverages: [
            "npm packaging tools",
            "Semantic versioning (semver)",
            "Version management scripts",
            "Package registry (internal or public)",
          ],
          outputs: [
            "Versioned npm packages",
            "Component library distributions",
            "Release documentation",
          ],
        },

        npmDistribution: {
          title: "NPM Distribution",
          pills: ["Package registry", "Consumable", "Versioned"],
          owns: [
            "Publish component packages to npm registry",
            "Make components available for consumption",
            "Manage package versions and updates",
            "Provide installation and usage documentation",
          ],
          leverages: [
            "npm registry (internal or public)",
            "Package management tools",
            "Version control and tagging",
          ],
          outputs: [
            "Published npm packages",
            "Installable component libraries",
            "Package documentation",
          ],
        },

        figmaMake: {
          title: "Figma Make Integration",
          pills: ["Automation", "Sync", "Design tools"],
          owns: [
            "Import npm packages into Figma via Figma Make",
            "Sync components from npm to Figma",
            "Make components available in Figma design environment",
            "Enable designers to use components in Figma",
          ],
          leverages: [
            "Figma Make automation platform",
            "npm package consumption",
            "Figma plugin/API integration",
            "Component sync workflows",
          ],
          outputs: [
            "Components available in Figma",
            "Design system components in design tools",
            "Sync'd component library",
          ],
        },

        designerWorkflow: {
          title: "Designer Workflow (Figma)",
          pills: ["Design composition", "Screen building", "Block creation"],
          owns: [
            "Use components from npm packages in Figma",
            "Build screens and layouts using design system components",
            "Create blocks and patterns with available components",
            "Compose complex interfaces from atomic components",
            "Iterate on designs using versioned components",
          ],
          leverages: [
            "Figma design tools",
            "Components synced from npm packages",
            "Design system component library",
            "Component variants and states",
          ],
          outputs: [
            "Designed screens and layouts",
            "Composed blocks and patterns",
            "Design system-based designs",
          ],
        },
      };

      const edges = [
        {
          from: "elliotDesigns",
          to: "cursorVisualBrowser",
          label: "designs inform creation",
          cls: "strong",
        },
        {
          from: "cursorVisualBrowser",
          to: "componentSpecs",
          label: "generate specs",
          cls: "strong",
        },
        {
          from: "tokens",
          to: "cursorVisualBrowser",
          label: "styling tokens",
          cls: "dashed",
        },
        {
          from: "cursorVisualBrowser",
          to: "versioning",
          label: "components ready",
          cls: "strong",
        },
        {
          from: "componentSpecs",
          to: "versioning",
          label: "specs included",
          cls: "strong",
        },
        {
          from: "tokens",
          to: "versioning",
          label: "tokens included",
          cls: "dashed",
        },
        {
          from: "versioning",
          to: "npmDistribution",
          label: "publish packages",
          cls: "success",
        },
        {
          from: "npmDistribution",
          to: "figmaMake",
          label: "consume packages",
          cls: "strong",
        },
        {
          from: "figmaMake",
          to: "designerWorkflow",
          label: "sync to Figma",
          cls: "success",
        },
        {
          from: "designerWorkflow",
          to: "elliotDesigns",
          label: "feedback loop",
          cls: "dashed",
        },
      ];

      const g = new dagreD3.graphlib.Graph({ multigraph: true })
        .setGraph({
          rankdir: "LR",
          nodesep: 50,
          ranksep: 90,
          marginx: 24,
          marginy: 22,
        })
        .setDefaultEdgeLabel(() => ({}));

      Object.entries(nodes).forEach(([key, r]) => {
        const base =
          "fill: rgba(255,255,255,0.03); stroke: rgba(255,255,255,0.16); stroke-width: 1.3px;";
        let style = base;
        if (key === "elliotDesigns" || key === "designerWorkflow") {
          style =
            base +
            " stroke: rgba(167,139,250,0.7); stroke-width: 2px; fill: rgba(167,139,250,0.08);";
        } else if (key === "cursorVisualBrowser") {
          style =
            base +
            " stroke: rgba(96,165,250,0.9); stroke-width: 2.5px; fill: rgba(96,165,250,0.12);";
        } else if (key === "componentSpecs" || key === "tokens") {
          style =
            base +
            " stroke: rgba(59,130,246,0.7); stroke-width: 2px; fill: rgba(59,130,246,0.08);";
        } else if (key === "versioning" || key === "npmDistribution") {
          style =
            base +
            " stroke: rgba(251,146,60,0.7); stroke-width: 2px; fill: rgba(251,146,60,0.08);";
        } else if (key === "figmaMake") {
          style =
            base +
            " stroke: rgba(52,211,153,0.7); stroke-width: 2px; fill: rgba(52,211,153,0.08);";
        }
        g.setNode(key, { label: r.title, rx: 12, ry: 12, padding: 14, style });
      });

      edges.forEach((e, i) => {
        g.setEdge(
          e.from,
          e.to,
          {
            label: e.label,
            class: e.cls || "",
            arrowhead: "vee",
            lineInterpolate: "basis",
          },
          `e${i}`,
        );
      });

      const svg = d3.select("#svg");
      const inner = d3.select("#g");
      const render = new dagreD3.render();

      const zoom = d3
        .zoom()
        .scaleExtent([0.5, 1.4])
        .on("zoom", (event) => inner.attr("transform", event.transform));
      svg.call(zoom);

      render(inner, g);

      function centerView() {
        const graphWidth = g.graph().width;
        const svgWidth = svg.node().clientWidth;
        const scale = 0.75;
        const tx = Math.max(16, (svgWidth - graphWidth * scale) / 2);
        const ty = 30;
        svg
          .transition()
          .duration(350)
          .call(zoom.transform, d3.zoomIdentity.translate(tx, ty).scale(scale));
      }
      centerView();

      const panel = d3.select("#panel");
      const panelTitle = d3.select("#panelTitle");
      const panelSubtitle = d3.select("#panelSubtitle");

      function setPanel(key) {
        const r = nodes[key];
        if (!r) return;
        panelTitle.text(r.title);
        panelSubtitle.text(
          "Details about this stage in the component creation and distribution workflow.",
        );
        panel.html("");
        panel.append("h3").text(r.title);

        const pills = panel.append("div").attr("class", "pillRow");
        (r.pills || []).forEach((p, idx) => {
          const cls =
            idx === 0 ? "pill accent" : idx === 1 ? "pill good" : "pill warn";
          pills.append("span").attr("class", cls).text(p);
        });

        const s1 = panel.append("div").attr("class", "section");
        s1.append("h4").text("Owns / Responsibilities");
        const ul1 = s1.append("ul");
        (r.owns || []).forEach((x) => ul1.append("li").text(x));

        const s2 = panel.append("div").attr("class", "section");
        s2.append("h4").text("Leverages / Tools");
        const ul2 = s2.append("ul");
        (r.leverages || []).forEach((x) => ul2.append("li").text(x));

        const s3 = panel.append("div").attr("class", "section");
        s3.append("h4").text("Outputs / Artifacts");
        const ul3 = s3.append("ul");
        (r.outputs || []).forEach((x) => ul3.append("li").text(x));
      }

      function clearSelection() {
        inner.selectAll("g.node").classed("selected", false);
      }

      inner
        .selectAll("g.node")
        .style("cursor", "pointer")
        .on("click", function (event, key) {
          clearSelection();
          d3.select(this).classed("selected", true);
          setPanel(key);
        });

      inner
        .selectAll("g.node")
        .filter((d) => d === "cursorVisualBrowser")
        .classed("selected", true);
      setPanel("cursorVisualBrowser");

      d3.select("#btnCenter").on("click", centerView);
      d3.select("#btnReset").on("click", () => {
        clearSelection();
        inner
          .selectAll("g.node")
          .filter((d) => d === "cursorVisualBrowser")
          .classed("selected", true);
        setPanel("cursorVisualBrowser");
        centerView();
      });

      // Panel toggle
      const rightPanel = d3.select("#rightPanel");
      const wrap = d3.select(".wrap");
      const toggleBtn = d3.select("#togglePanel");
      
      function updateToggleButton() {
        const isCollapsed = rightPanel.classed("collapsed");
        toggleBtn.text(isCollapsed ? "Show Panel" : "Hide Panel");
        toggleBtn.attr("title", isCollapsed ? "Show panel" : "Hide panel");
      }
      
      toggleBtn.on("click", () => {
        const isCollapsed = rightPanel.classed("collapsed");
        rightPanel.classed("collapsed", !isCollapsed);
        wrap.classed("right-collapsed", !isCollapsed);
        updateToggleButton();
      });
      
      // Initialize button text
      updateToggleButton();
    </script>
  </body>
</html>
